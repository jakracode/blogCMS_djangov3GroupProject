{% load static %}
<!DOCTYPE html>
<html lang="km" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>á”áŸ’á›á€áŸ‹ - á¢ááŸ’áá”á‘á‘á¶áŸ†á„á¢áŸáŸ‹ | 4\null Freelancer</title>

  <!-- SEO Meta Tags -->

  <meta name="description"
    content="á”áŸ’á›á€áŸ‹ 4\null Freelancer â€” á…áŸ‚á€ášáŸ†á›áŸ‚á€á…áŸ†ááŸáŸ‡áŠá¹á„ á”á…áŸ’á…áŸá€áœá·á‡áŸ’á‡á¶ á“á·á„á”á‘á–á·áŸáŸ„á’á“áŸá•áŸ’á‘á¶á›áŸ‹áŸ” á¢á¶á“á¢ááŸ’áá”á‘ááŸ’á˜á¸áŸ—á–á¸á”á…áŸ’á…áŸá€áœá·á‡áŸ’á‡á¶ á“á·á„á€á¶ášá„á¶áš freelanceráŸ”" />
  <link rel="canonical" href="{{ request.build_absolute_uri }}" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="á”áŸ’á›á€áŸ‹ | 4\null Freelancer" />
  <meta property="og:description" content="á…áŸ‚á€ášáŸ†á›áŸ‚á€á…áŸ†ááŸáŸ‡áŠá¹á„ á”á…áŸ’á…áŸá€áœá·á‡áŸ’á‡á¶ á“á·á„á”á‘á–á·áŸáŸ„á’á“áŸá•áŸ’á‘á¶á›áŸ‹" />
  <meta property="og:url" content="{{ request.build_absolute_uri }}" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="á”áŸ’á›á€áŸ‹ | 4\null Freelancer" />
  <meta name="twitter:description" content="á…áŸ‚á€ášáŸ†á›áŸ‚á€á…áŸ†ááŸáŸ‡áŠá¹á„ á”á…áŸ’á…áŸá€áœá·á‡áŸ’á‡á¶ á“á·á„á”á‘á–á·áŸáŸ„á’á“áŸá•áŸ’á‘á¶á›áŸ‹" />

  <!-- Khmer Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;500;600;700&family=Battambang:wght@700;900&display=swap"
    rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            kantumruy: ["Kantumruy Pro", "sans-serif"],
            battambang: ["Battambang", "sans-serif"],
          },
        },
      },
    };
  </script>
  <style>
    /* Theme Variables */
    :root {
      --bg-primary: linear-gradient(to bottom right,
          rgb(17, 24, 39),
          rgb(24, 24, 27),
          rgb(0, 0, 0));
      --bg-nav: rgba(0, 0, 0, 0.4);
      --bg-card: rgba(255, 255, 255, 0.05);
      --border-color: rgba(255, 255, 255, 0.1);
      --text-primary: rgb(255, 255, 255);
      --text-secondary: rgb(209, 213, 219);
      --text-muted: rgb(156, 163, 175);
    }

    .light-mode {
      --bg-primary: linear-gradient(to bottom right,
          rgb(241, 245, 249),
          rgb(226, 232, 240),
          rgb(203, 213, 225));
      --bg-nav: rgba(255, 255, 255, 0.8);
      --bg-card: rgba(255, 255, 255, 0.9);
      --border-color: rgba(0, 0, 0, 0.1);
      --text-primary: rgb(15, 23, 42);
      --text-secondary: rgb(51, 65, 85);
      --text-muted: rgb(100, 116, 139);
    }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: background 0.3s ease, color 0.3s ease;
    }

    .theme-card {
      background: var(--bg-card);
      border-color: var(--border-color);
    }

    .theme-nav {
      background: var(--bg-nav);
      border-color: var(--border-color);
    }

    .theme-text {
      color: var(--text-primary);
    }

    .theme-text-secondary {
      color: var(--text-secondary);
    }

    .theme-text-muted {
      color: var(--text-muted);
    }

    /* Toggle Switch Styles */
    .theme-toggle {
      position: relative;
      width: 60px;
      height: 30px;
      background: rgba(100, 116, 139, 0.3);
      border-radius: 30px;
      cursor: pointer;
      transition: background 0.3s;
      border: 2px solid rgba(148, 163, 184, 0.2);
    }

    .theme-toggle:hover {
      background: rgba(100, 116, 139, 0.4);
    }

    .theme-toggle-slider {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      transition: transform 0.3s;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .light-mode .theme-toggle-slider {
      transform: translateX(30px);
      background: #fbbf24;
    }

    .theme-toggle-icon {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 14px;
      transition: opacity 0.3s;
    }

    .theme-toggle-icon.moon {
      left: 6px;
      opacity: 1;
    }

    .theme-toggle-icon.sun {
      right: 6px;
      opacity: 0.3;
    }

    .light-mode .theme-toggle-icon.moon {
      opacity: 0.3;
    }

    .light-mode .theme-toggle-icon.sun {
      opacity: 1;
    }

    /* Light mode text overrides - stronger contrast for readability */
    .light-mode .text-white {
      color: rgb(15, 23, 42) !important;
    }

    .light-mode .text-gray-200,
    .light-mode .text-gray-300 {
      color: rgb(30, 41, 59) !important;
    }

    .light-mode .text-gray-400 {
      color: rgb(71, 85, 105) !important;
    }

    .light-mode .text-gray-500 {
      color: rgb(100, 116, 139) !important;
    }

    .light-mode .text-gray-600 {
      color: rgb(51, 65, 85) !important;
    }

    .light-mode .text-cyan-300,
    .light-mode .text-cyan-400 {
      color: rgb(14, 116, 144) !important;
    }

    /* Light mode card backgrounds */
    .light-mode .bg-white\/5 {
      background: rgba(255, 255, 255, 0.9) !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>

<body class="min-h-screen transition-all duration-300">
  <!-- Fixed Glass Navbar (same as homepage) -->
  <nav class="fixed top-0 left-0 right-0 z-50 backdrop-blur-xl theme-nav border-b transition-all duration-300 relative">
    <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center">
      <a href="/"
        class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent font-battambang truncate max-w-[200px] md:max-w-none">
        4\null Freelancer
      </a>

      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center space-x-6">
        <div class="flex space-x-10 font-kantumruy theme-text-secondary">
          <a href="/" class="hover:text-cyan-400 transition">á‘áŸ†á–áŸášáŠá¾á˜</a>
          <a href="{% url 'blog_list' %}" class="text-cyan-400 font-semibold">á”áŸ’á›á€áŸ‹</a>
          <a href="#" class="hover:text-cyan-400 transition">á‚á˜áŸ’ášáŸ„á„</a>
          <a href="#" class="hover:text-cyan-400 transition">á‘áŸ†á“á¶á€áŸ‹á‘áŸ†á“á„</a>
        </div>
        <!-- Theme Toggle -->
        <button class="theme-toggle js-theme-toggle" aria-label="Toggle theme">
          <span class="theme-toggle-icon moon">ğŸŒ™</span>
          <span class="theme-toggle-icon sun">â˜€ï¸</span>
          <div class="theme-toggle-slider"></div>
        </button>
      </div>

      <!-- Mobile Menu Button -->
      <div class="md:hidden flex items-center gap-4">
        <!-- Theme Toggle Mobile -->
        <button class="theme-toggle js-theme-toggle" aria-label="Toggle theme" style="transform: scale(0.8);">
          <span class="theme-toggle-icon moon">ğŸŒ™</span>
          <span class="theme-toggle-icon sun">â˜€ï¸</span>
          <div class="theme-toggle-slider"></div>
        </button>
        <button id="mobile-menu-btn" class="text-cyan-400 focus:outline-none">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu Dropdown -->
    <div id="mobile-menu" class="hidden md:hidden px-6 pb-6 pt-2 border-t border-gray-700/50">
      <div class="flex flex-col space-y-4 font-kantumruy theme-text-secondary mt-4 text-center">
        <a href="/" class="hover:text-cyan-400 transition py-2 block">á‘áŸ†á–áŸášáŠá¾á˜</a>
        <a href="{% url 'blog_list' %}" class="text-cyan-400 font-semibold py-2 block">á”áŸ’á›á€áŸ‹</a>
        <a href="#" class="hover:text-cyan-400 transition py-2 block">á‚á˜áŸ’ášáŸ„á„</a>
        <a href="#" class="hover:text-cyan-400 transition py-2 block">á‘áŸ†á“á¶á€áŸ‹á‘áŸ†á“á„</a>
      </div>
    </div>
  </nav>

  <!-- Blog Posts Page Content -->
  <section class="pt-32 pb-20 px-6">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-16">
        <h1
          class="text-5xl md:text-7xl font-extrabold font-battambang bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
          á”áŸ’á›á€áŸ‹ášá”áŸáŸ‹á™á¾á„
        </h1>
        <p class="mt-6 text-xl text-gray-400 font-kantumruy">
          á…áŸ‚á€ášáŸ†á›áŸ‚á€á…áŸ†ááŸáŸ‡áŠá¹á„ á”á…áŸ’á…áŸá€á‘áŸáŸ á“á·á„á”á‘á–á·áŸáŸ„á’á“áŸá•áŸ’á‘á¶á›áŸ‹
        </p>
        <!-- Search Form -->
        <form action="" method="get" class="mt-8 max-w-2xl mx-auto">
          <label for="q" class="sr-only">áŸáŸ’áœáŸ‚á„ášá€á¢ááŸ’áá”á‘</label>
          <div class="flex items-center gap-3">
            <input type="text" id="q" name="q" value="{{ q|default:'' }}"
              placeholder="áŸáŸ’áœáŸ‚á„ášá€áá¶á˜á…áŸ†áá„á‡á¾á„ á˜á¶áá·á€á¶ á¬áŸáŸ’á›á¶á€..."
              class="w-full px-5 py-3 rounded-xl bg-white/10 border border-white/10 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 font-kantumruy" />
            <button type="submit"
              class="px-6 py-3 rounded-xl bg-cyan-600 hover:bg-cyan-500 text-white font-bold font-kantumruy">
              áŸáŸ’áœáŸ‚á„ášá€
            </button>
          </div>
          {% if q %}
          <p class="mt-3 text-sm text-gray-400 font-kantumruy">
            á›á‘áŸ’á’á•á›áŸáŸ’áœáŸ‚á„ášá€áŸá˜áŸ’ášá¶á”áŸ‹: "{{ q }}" â€” ášá€áƒá¾á‰ {{ posts|length }} á¢ááŸ’áá”á‘
          </p>
          {% endif %}
        </form>
      </div>

      <!-- Posts Grid -->
      {% if posts %}
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for post in posts %}
        <article
          class="group theme-card backdrop-blur-xl rounded-2xl overflow-hidden transition-all duration-500 hover:-translate-y-3 shadow-xl hover:border-cyan-500/50"
          style="border: 1px solid var(--border-color)">
          <a href="{% url 'blog_detail' post.slug %}">
            <!-- Featured Image -->
            {% if post.featured_image %}
            <div class="overflow-hidden">
              <img src="{{ post.featured_image.url }}" alt="{{ post.title }}"
                class="w-full h-48 object-cover group-hover:scale-110 transition duration-700" />
            </div>
            {% else %}
            <div class="bg-gradient-to-br from-cyan-900/50 to-blue-900/50 h-48 flex items-center justify-center">
              <span class="text-6xl opacity-30">Article</span>
            </div>
            {% endif %}

            <!-- Content -->
            <div class="p-6">
              <h2
                class="text-xl md:text-2xl font-bold font-battambang theme-text group-hover:text-cyan-400 transition line-clamp-2">
                {{ post.title }}
              </h2>

              <div class="flex items-center gap-4 mt-4 text-sm theme-text-muted font-kantumruy">
                <span>{{ post.author.get_full_name|default:"4\null" }}</span>
                <span>â€¢</span>
                <span>{{ post.date_created|date:"d/m/Y" }}</span>
              </div>

              <p class="mt-4 theme-text-secondary font-kantumruy line-clamp-2 leading-relaxed text-sm">
                {{ post.content|striptags|truncatewords:20 }}
              </p>

              <div
                class="mt-4 flex items-center text-cyan-400 font-bold font-kantumruy group-hover:translate-x-2 transition text-sm">
                á¢á¶á“á”á“áŸ’á <span class="ml-2">â†’</span>
              </div>
            </div>
          </a>
        </article>
        {% endfor %}
      </div>

      <!-- Pagination -->
      {% if posts.has_other_pages %}
      <div class="mt-16 flex justify-center gap-4 font-kantumruy">
        {% if posts.has_previous %}
        <a href="?page={{ posts.previous_page_number }}{% if q %}&q={{ q }}{% endif %}"
          class="px-6 py-3 rounded-xl bg-white/5 border border-white/10 theme-text hover:bg-cyan-500/20 transition">
          â† áá™á€áŸ’ášáŸ„á™
        </a>
        {% endif %}

        <div class="flex items-center px-6 py-3 rounded-xl bg-cyan-600 text-white font-bold">
          á‘áŸ†á–áŸáš {{ posts.number }} á“áŸƒ {{ posts.paginator.num_pages }}
        </div>

        {% if posts.has_next %}
        <a href="?page={{ posts.next_page_number }}{% if q %}&q={{ q }}{% endif %}"
          class="px-6 py-3 rounded-xl bg-white/5 border border-white/10 theme-text hover:bg-cyan-500/20 transition">
          á”á“áŸ’á‘á¶á”áŸ‹ â†’
        </a>
        {% endif %}
      </div>
      {% endif %} {% else %}
      <div class="text-center py-20">
        {% if q %}
        <p class="text-3xl theme-text-muted font-kantumruy">
          á‚áŸ’á˜á¶á“á›á‘áŸ’á’á•á›áŸá˜áŸ’ášá¶á”áŸ‹ "{{ q }}"
        </p>
        <p class="mt-4 theme-text-muted font-kantumruy">
          áŸá¼á˜á–áŸ’á™á¶á™á¶á˜á–á¶á€áŸ’á™á‚á“áŸ’á›á¹áŸ‡á•áŸ’áŸáŸá„á‘áŸ€á á¬á›á»á”á€á¶ášáŸáŸ’áœáŸ‚á„ášá€áŸ”
        </p>
        {% else %}
        <p class="text-3xl theme-text-muted font-kantumruy">
          á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á¢ááŸ’áá”á‘á“áŸ…á¡á¾á™á‘áŸ...
        </p>
        <p class="mt-4 theme-text-muted">áá¶á˜áŠá¶á“á”áŸ’á›á€áŸ‹á“áŸáŸ‡á±áŸ’á™á”á¶á“á‘áŸ€á„á‘á¶ááŸ‹!</p>
        {% endif %}
      </div>
      {% endif %}
    </div>
  </section>

  <!-- Footer (optional) -->
  <footer class="py-10 text-center theme-text-muted font-kantumruy text-sm border-t transition-colors duration-300"
    style="border-color: var(--border-color)">
    Â© 2025 4\null Freelancer â€¢ á”á„áŸ’á€á¾ááŠáŸ„á™ â¤ï¸ á“á·á„á€á¶á áŸ’áœáŸá‡á¶á…áŸ’ášá¾á“
  </footer>

  <!-- Theme Toggle Script -->
  <script>
    // Check for saved theme preference or default to dark
    const currentTheme = localStorage.getItem("theme") || "dark";
    if (currentTheme === "light") {
      document.body.classList.add("light-mode");
    }

    // Toggle theme (Handling multiple toggles for responsive design)
    const themeToggles = document.querySelectorAll('.js-theme-toggle');

    themeToggles.forEach(toggle => {
      toggle.addEventListener('click', function () {
        document.body.classList.toggle('light-mode');
        const theme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
        localStorage.setItem('theme', theme);
      });
    });

    // Mobile Menu Toggle
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');

    if (mobileMenuBtn && mobileMenu) {
      mobileMenuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });
    }
  </script>
</body>

</html>